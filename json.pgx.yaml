---
+grammar: json
+include: pegex-atoms
+toprule: json
+version: 0.0.1
boolean:
  .any:
  - .ref: 'true'
  - .ref: 'false'
'false':
  .rgx: 'false'
json:
  .any:
  - .ref: map
  - .ref: seq
map:
  .all:
  - .rgx: \s*\{\s*
  - +max: 1
    .all:
    - .ref: pair
    - +min: 0
      -flat: 1
      .all:
      - .rgx: \s*,\s*
      - .ref: pair
  - .rgx: \s*\}\s*
node:
  .any:
  - .ref: map
  - .ref: seq
  - .ref: scalar
'null':
  .rgx: 'null'
number:
  .rgx: (\-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][\-\+]?[0-9]+)?)
pair:
  .all:
  - .ref: string
  - .rgx: \s*:\s*
  - .ref: node
scalar:
  .any:
  - .ref: string
  - .ref: number
  - .ref: boolean
  - .ref: 'null'
seq:
  .all:
  - .rgx: \s*\[\s*
  - +max: 1
    .all:
    - .ref: node
    - +min: 0
      -flat: 1
      .all:
      - .rgx: \s*,\s*
      - .ref: node
  - .rgx: \s*\]\s*
string:
  .rgx: '"((?:\\(?:["\\/bfnrt]|u[0-9a-fA-F]{4})|[^"\x00-\x1f])*)"'
'true':
  .rgx: 'true'
